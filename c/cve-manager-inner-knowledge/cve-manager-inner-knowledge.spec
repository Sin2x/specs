%define master_package cve-manager
%define lists_dist %{_sysconfdir}/%{master_package}
%define miner %{master_package}-knowledge-miner

Name: %{master_package}-inner-knowledge
Version: 2021.04.12
Release: alt1

Summary: Supplimentary data for cve-manager
License: CC-BY-SA-3.0
Group: Other
Url: https://www.altlinux.org/CVE-Manager

Packager: Alexey Appolonov <alexey@altlinux.org>

# http://git.altlinux.org/people/alexey/packages/?p=%{name}.git
Source: %{name}-%{version}.tar

BuildRequires: python3
Requires: %{master_package} >= 0.50.0

ExclusiveArch: x86_64

%description
Data used by "cve-manager" to 1) map package names to CPE products (a list of
mapping prescriptions, a list of excluded CPEs and a list of ignored mapping
pairs) and to 2) exclude vulnerabilities that have no real effect in a current
state of specified repositories.

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

%package -n %{miner}
Summary: %{master_package} DB client for making specific queries
Group: Other

Requires: python3-module-ax

%description -n %{miner}
%{miner} helps to get various kinds of information from %{master_package} DB
such as used package names, used CPEs, etc.

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

%prep
%setup
%build

%check
./checker

%install
mkdir -p %{buildroot}%{lists_dist}
mkdir -p %{buildroot}%{_bindir}
install -m0664 *.csv %{buildroot}%{lists_dist}
install -m0755 %{miner} %{buildroot}%{_bindir}

%post
# cve group should be created at the post stage of cve-manager installation
chgrp cve %{lists_dist}/*.conf

%files
%{lists_dist}/*.csv

%files -n %{miner}
%{_bindir}/%{miner}

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

%changelog
* Mon Apr 12 2021 Alexey Appolonov <alexey@altlinux.org> 2021.04.12-alt1
- Updated lists.

* Wed Apr 07 2021 Alexey Appolonov <alexey@altlinux.org> 2021.04.07-alt1
- Updated list of ignored mapping pairs.

* Mon Mar 29 2021 Alexey Appolonov <alexey@altlinux.org> 2021.03.29-alt1
- Updated lists.

* Sat Mar 27 2021 Alexey Appolonov <alexey@altlinux.org> 2021.03.27-alt1
- Updated lists;
- Corrected script that validates the lists.

* Mon Mar 22 2021 Alexey Appolonov <alexey@altlinux.org> 2021.03.22-alt1
- Updated list of ignored mapping pairs.

* Thu Mar 18 2021 Alexey Appolonov <alexey@altlinux.org> 2021.03.18-alt1
- Updated lists.

* Mon Mar 15 2021 Alexey Appolonov <alexey@altlinux.org> 2021.03.15-alt1
- Updated list of of prescribed mapping pairs.

* Tue Mar 09 2021 Alexey Appolonov <alexey@altlinux.org> 2021.03.09-alt1
- Updated lists.

* Sun Mar 07 2021 Alexey Appolonov <alexey@altlinux.org> 2021.03.07-alt1
- Updated lists.

* Mon Mar 01 2021 Alexey Appolonov <alexey@altlinux.org> 2021.03.01-alt1
- Updated list of ignored mapping pairs.

* Mon Feb 22 2021 Alexey Appolonov <alexey@altlinux.org> 2021.02.22-alt1
- Updated list of ignored mapping pairs.

* Mon Feb 15 2021 Alexey Appolonov <alexey@altlinux.org> 2021.02.15-alt1
- Updated list of ignored mapping pairs.

* Tue Feb 09 2021 Alexey Appolonov <alexey@altlinux.org> 2021.02.09-alt1
- Updated list of ignored mapping pairs.

* Mon Jan 25 2021 Alexey Appolonov <alexey@altlinux.org> 2021.01.25-alt1
- Updated lists.

* Mon Jan 11 2021 Alexey Appolonov <alexey@altlinux.org> 2021.01.11-alt1
- Updated list of ignored mapping pairs.

* Wed Dec 09 2020 Alexey Appolonov <alexey@altlinux.org> 2020.12.09-alt1
- Updated lists.

* Mon Nov 16 2020 Alexey Appolonov <alexey@altlinux.org> 2020.11.16-alt1
- Updated lists.

* Wed Nov 11 2020 Alexey Appolonov <alexey@altlinux.org> 2020.11.11-alt1
- Updated lists.

* Fri Oct 16 2020 Alexey Appolonov <alexey@altlinux.org> 2020.10.16-alt1
- Updated lists.

* Sun Oct 11 2020 Alexey Appolonov <alexey@altlinux.org> 2020.10.11-alt1
- Updated lists.

* Mon Oct 05 2020 Alexey Appolonov <alexey@altlinux.org> 2020.10.05-alt1
- Updated lists.

* Mon Sep 14 2020 Alexey Appolonov <alexey@altlinux.org> 2020.09.14-alt1
- Updated list of ignored mapping pairs.

* Mon Sep 07 2020 Alexey Appolonov <alexey@altlinux.org> 2020.09.07-alt1
- Updated list of ignored mapping pairs.

* Fri Aug 28 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.28-alt1
- Updated lists.

* Wed Aug 26 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.26-alt1
- Updated lists.

* Tue Aug 25 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.25-alt1
- Updated lists.

* Fri Aug 21 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.21-alt1
- Updated lists.

* Mon Aug 17 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.17-alt1
- Updated list of ignored mapping pairs.

* Fri Aug 14 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.14-alt1
- Updated list of of prescribed mapping pairs.

* Thu Apr 30 2020 Alexey Appolonov <alexey@altlinux.org> 2020.04.30-alt1
- Updated list of excluded CPEs.

* Sun Apr 19 2020 Alexey Appolonov <alexey@altlinux.org> 2020.04.19-alt1
- Updated list of ignored mapping pairs.

* Mon Apr 13 2020 Alexey Appolonov <alexey@altlinux.org> 2020.04.13-alt1
- Updated lists.

* Wed Feb 19 2020 Alexey Appolonov <alexey@altlinux.org> 2020.02.19-alt1
- A tool for mining some of the knowledge;
- A new list (the list of excluded CPEs);
- Updated list of ignored mapping pairs and updated list of prescribed
  mapping pairs.

* Thu Feb 13 2020 Alexey Appolonov <alexey@altlinux.org> 2020.02.13-alt1
- Updated lists.

* Sun Feb 02 2020 Alexey Appolonov <alexey@altlinux.org> 2020.02.02-alt1
- Updated lists.

* Tue Dec 24 2019 Alexey Appolonov <alexey@altlinux.org> 2019.12.04-alt2
- Column for the comments has been added to excluded-issues.csv.

* Wed Dec 04 2019 Alexey Appolonov <alexey@altlinux.org> 2019.12.04-alt1
- New type of inner knowledge - discarded matches (matches that should not
  be saved in cve-manager DB).

* Mon Nov 25 2019 Alexey Appolonov <alexey@altlinux.org> 2019.11.23-alt2
- cve-manager users are privileged to modify the lists.

* Sat Nov 23 2019 Alexey Appolonov <alexey@altlinux.org> 2019.11.23-alt1
- Initial release.
